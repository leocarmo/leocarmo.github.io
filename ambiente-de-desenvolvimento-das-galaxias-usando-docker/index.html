<!doctype html><html lang=en>
<head>
<title>Ambiente de desenvolvimento das galáxias usando Docker :: leocarmo.dev</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Tenha um ambiente de desenvolvimento completo com as principais ferramentas usando Docker.">
<meta name=keywords content>
<meta name=robots content="noodp">
<link rel=canonical href=/ambiente-de-desenvolvimento-das-galaxias-usando-docker/>
<link rel=stylesheet href=/assets/style.css>
<link rel=stylesheet href=/assets/green.css>
<link rel=stylesheet href=/style.css>
<link rel=apple-touch-icon href=/img/apple-touch-icon-192x192.png>
<link rel="shortcut icon" href=/img/favicon/green.png>
<meta name=twitter:card content="summary">
<meta property="og:locale" content="en">
<meta property="og:type" content="article">
<meta property="og:title" content="Ambiente de desenvolvimento das galáxias usando Docker">
<meta property="og:description" content="Tenha um ambiente de desenvolvimento completo com as principais ferramentas usando Docker.">
<meta property="og:url" content="/ambiente-de-desenvolvimento-das-galaxias-usando-docker/">
<meta property="og:site_name" content="leocarmo.dev">
<meta property="og:image" content="/ambiente-de-desenvolvimento-das-galaxias-usando-docker/images/cover.jpeg">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">
<meta property="article:published_time" content="2021-08-03 10:00:00 -0300 -0300">
</head>
<body class=green>
<div class="container center headings--one-size">
<header class=header>
<div class=header__inner>
<div class=header__logo>
<a href=/>
<div class=logo>
leocarmo.dev
</div>
</a>
</div>
<div class=menu-trigger>menu</div>
</div>
<nav class=menu>
<ul class="menu__inner menu__inner--desktop">
<li><a href=https://github.com/leocarmo>github</a></li>
<li><a href=https://www.linkedin.com/in/leonardocarmo/>linkedin</a></li>
<li><a href=/index.xml>rss</a></li>
</ul>
<ul class="menu__inner menu__inner--mobile">
<li><a href=https://github.com/leocarmo>github</a></li>
<li><a href=https://www.linkedin.com/in/leonardocarmo/>linkedin</a></li>
<li><a href=/index.xml>rss</a></li>
</ul>
</nav>
</header>
<div class=content>
<div class=post>
<h1 class=post-title>
<a href=/ambiente-de-desenvolvimento-das-galaxias-usando-docker/>Ambiente de desenvolvimento das galáxias usando Docker</a></h1>
<div class=post-meta>
<span class=post-date>
2021-08-03
</span>
<span class=post-author>:: leocarmo</span>
</div>
<span class=post-tags>
#<a href=/tags/docker/>docker</a>&nbsp;
#<a href=/tags/kafka/>kafka</a>&nbsp;
#<a href=/tags/redis/>redis</a>&nbsp;
#<a href=/tags/mysql/>mysql</a>&nbsp;
#<a href=/tags/mariadb/>mariadb</a>&nbsp;
#<a href=/tags/postgres/>postgres</a>&nbsp;
#<a href=/tags/mongodb/>mongodb</a>&nbsp;
</span>
<img src=/ambiente-de-desenvolvimento-das-galaxias-usando-docker/images/cover.jpeg class=post-cover alt="Ambiente de desenvolvimento das galáxias usando Docker">
<div class=post-content><div>
<p>Criar um ambiente de desenvolvimento local pode parecer um desafio. Quem nunca sofreu <em>~ pelo menos um pouco ~</em> para conseguir ter as dependências rodando na sua maquina para criar um projeto?</p>
<p>Pois é, normalmente passamos por isso quase sempre. Antes de conhecer o <a href=https://www.docker.com/>Docker</a>, isso era muito mais difícil&mldr; Ter que subir um banco de dados localmente sempre dava algum tipo de dor de cabeça, ainda mais quando era preciso ter uma versão específica por conta de algum projeto já existente que precisava de manutenção.</p>
<p>A ideia é te ajudar a montar um ambiente de desenvolvimento local de forma fácil e rápida usando tudo com Docker. Além disso, vou te mostrar algumas ferramentas de apoio que podem ajudar muito na hora de debugar algumas coisas.</p>
<p>É importante que você tenha pelo menos uma base sobre Docker e <a href=https://docs.docker.com/compose/>Docker Compose</a> e claro, tenha ele <a href=https://www.docker.com/products/docker-desktop>instalado</a> na sua máquina.</p>
<p>Para facilitar, sugiro que você clone o projeto que deixei preparado para este artigo com todos os arquivos prontos:</p>
<p><a href=https://github.com/leocarmo/docker-local-stack>https://github.com/leocarmo/docker-local-stack</a></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>git clone git@github.com:leocarmo/docker-local-stack.git
</code></pre></div><p>Antes de iniciar as ferramentas, criaremos uma <a href=https://docs.docker.com/network/>rede para nossos containers</a>, pois teremos vários arquivos diferentes para nossas stacks, assim você pode escolher de forma mais fácil qual utilizar e quando.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>docker network create global-default
</code></pre></div><hr>
<p>Tópicos:</p>
<ol>
<li><a href=#1-visibilidade-de-containers>Visibilidade de containers</a></li>
<li><a href=#2-redis>Redis</a></li>
<li><a href=#3-kafka>Kafka</a></li>
<li><a href=#4-mongodb>MongoDB</a></li>
<li><a href=#5-elasticsearch>ElasticSearch</a></li>
<li><a href=#6-databases>Databases</a></li>
<li><a href=#7-mock>Mock</a></li>
<li><a href=#8-aws>AWS</a></li>
</ol>
<hr>
<h2 id=1-visibilidade-de-containers>1. Visibilidade de containers<a href=#1-visibilidade-de-containers class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>A primeira ferramenta que gosto de usa é o <a href=https://dockstation.io/>DockStation</a>, infelizmente ele precisa ser instalado na sua máquina, prometo que será o único.</p>
<p>Ele tem uma infinidade de ferramentas para te ajudar a gerenciar melhor seus containers, o que precisaremos em breve, e uma interface bem amigável.</p>
<p>Aqui tem um preview dele:</p>
<p><img src=https://cdn.hashnode.com/res/hashnode/image/upload/v1626463235111/WL8MPPAnBw.png alt=DockStation></p>
<p>De qualquer forma, caso você não queira instalar nada na sua máquina, existe uma alternativa que é o <a href=https://www.portainer.io/>Portainer</a>, ele pode ser iniciado via container, e também tem diversas ferramentas disponíveis para te ajudar.</p>
<p><img src=https://cdn.hashnode.com/res/hashnode/image/upload/v1626464059771/lyRrNLO6X.png alt=Portainer></p>
<p>O exemplo para rodar via <code>compose</code> está <a href=https://github.com/leocarmo/docker-local-stack/blob/main/container-visibility/docker-compose-portainer.yaml>aqui</a>.</p>
<p>Para iniciar o Portainer:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>docker compose -f container-visibility/docker-compose-portainer.yaml up -d
</code></pre></div><hr>
<h2 id=2-redis>2. Redis<a href=#2-redis class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>Falando sobre <a href=https://redis.io/>Redis</a>, normalmente usamos ele de duas formas: single node ou cluster. Ainda temos outra ferramenta que traz uma visibilidade incrível, evitando que seja preciso criar código para debugar chaves, consumo de recursos e ainda consegue sugerir melhorias nas buscas, por exemplo. Falaremos dela em breve.</p>
<p>Começando pelo Redis single node, <a href=https://github.com/leocarmo/docker-local-stack/blob/main/redis/docker-compose-single.yaml>esse aqui</a> é um exemplo do <code>compose</code>. Para iniciar:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>docker compose -f redis/docker-compose-single.yaml up -d
</code></pre></div><p>Sim, bem simples. Agora montaremos um cluster. Para isso, utilizaremos as imagens da <a href=https://bitnami.com/>Bitnami</a>, eles possuem diversas outras ferramentas já prontas para utilizar também, vale a pena dar uma olhada.</p>
<blockquote>
<p>Vale pontuar que não é uma imagem oficial do Redis como a do single node. É possível criar um cluster utilizando a imagem oficial, mas nosso foco aqui é para desenvolvimento local, então utilizaremos o que é mais fácil e rápido para ter rodando.</p>
</blockquote>
<p>O repositório com o <code>docker-compose</code> original da Bitnami está no <a href=https://github.com/bitnami/bitnami-docker-redis-cluster>github</a> deles, porém, realizei algumas pequenas modificações para que ele possa ter contato com todos os outros containers que utilizaremos aqui.</p>
<p>O <code>compose</code> do Redis cluster com algumas pequenas mudanças que fiz está <a href=https://github.com/leocarmo/docker-local-stack/blob/main/redis/docker-compose-cluster.yaml>aqui</a>. Para iniciar:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>docker compose -f redis/docker-compose-cluster.yaml up -d
</code></pre></div><p>Ótimo, agora temos um single node e um cluster de Redis funcionando!</p>
<p>Vou te mostrar uma ferramenta que gosto muito, o <a href=https://redislabs.com/redis-enterprise/redis-insight/>RedisInsight</a>, que é uma GUI para interagir com o Redis (por isso modifiquei tudo para ficar na <code>network global-default</code>).</p>
<p><img src=https://cdn.hashnode.com/res/hashnode/image/upload/v1626467588436/4D_s2nTu-.png alt=RedisInsight></p>
<p>Então nosso <code>compose</code> do RedisInsight fica <a href=https://github.com/leocarmo/docker-local-stack/blob/main/redis/docker-compose-insight.yaml>assim</a>. Para iniciar:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>docker compose -f redis/docker-compose-insight.yaml up -d
</code></pre></div><p>Para conectar o RedisInsight ao nosso cluster ou ao single node é bem simples, ele fica neste endereço: <a href=http://0.0.0.0:8001/>http://0.0.0.0:8001/</a>. Depois, basta selecionar que você já possui um database e colocar as informações para conectar. Um exemplo para conectar no cluster:</p>
<p><img src=https://cdn.hashnode.com/res/hashnode/image/upload/v1626467726998/oKqgGWqRTc.png alt=image.png></p>
<blockquote>
<p>Não esqueça da senha: <em>redis</em></p>
</blockquote>
<hr>
<h2 id=3-kafka>3. Kafka<a href=#3-kafka class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>Para ter um cluster de <a href=https://www.confluent.io/what-is-apache-kafka/>Apache Kafka</a> rodando, precisamos do <a href=https://zookeeper.apache.org/>ZooKeeper</a>. É bem simples também, <a href=https://github.com/leocarmo/docker-local-stack/blob/main/kafka/docker-compose-cluster.yaml>aqui</a> tem o <code>compose</code> com tudo isso, sendo um cluster de Kafka com 3 brokers. Para rodar:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>docker compose -f kafka/docker-compose-cluster.yaml up -d
</code></pre></div><p>O destaque aqui vai para a ferramenta <a href=https://github.com/cloudhut/kowl>Kowl</a>, que é uma UI para o Kafka, gostei bastante dela comparada a outras.</p>
<p><img src=https://github.com/cloudhut/kowl/raw/master/docs/assets/preview.gif alt="Kowl Kafka"></p>
<p>O Kowl ficará disponível em <a href=http://0.0.0.0:8080/>http://0.0.0.0:8080/</a>.</p>
<p>Ele tem a versão open-source, mas também tem uma versão Business, enquanto ela está na versão beta, você pode conseguir uma licença limitada, porém gratuita e eterna <a href=https://license.cloudhut.dev/>aqui</a>.</p>
<blockquote>
<p>Até o dia de hoje, ainda está liberado, então aproveita!</p>
</blockquote>
<hr>
<h2 id=4-mongodb>4. MongoDB<a href=#4-mongodb class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>Para o Mongo, foi bem simples montar algo que já resolva localmente nossa necessidade. Coloquei também o <a href=https://github.com/mongo-express/mongo-express>mongo-express</a> no <code>compose</code> para ajudar no debug.</p>
<p><img src=https://cdn.hashnode.com/res/hashnode/image/upload/v1626477968205/cU65kS0bc.png alt=mongo-express></p>
<p>O <code>compose</code> final está <a href=https://github.com/leocarmo/docker-local-stack/blob/main/mongodb/docker-compose-single.yaml>aqui</a>. Caso queira ver mais parâmetros disponíveis na imagem oficial, você pode acessar <a href=https://hub.docker.com/_/mongo>aqui</a>. Para rodar:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>docker compose -f mongodb/docker-compose-single.yaml up -d
</code></pre></div><p>O mongo-express ficará disponível em <a href=http://0.0.0.0:8081/>http://0.0.0.0:8081/</a>.</p>
<p>Caso você precise de algo mais robusto, a Bitnami também tem um <code>compose</code> pronto com múltiplos shards, vale a pena conferir <a href=https://github.com/bitnami/bitnami-docker-mongodb-sharded/blob/master/docker-compose-multiple-shards.yml>aqui</a>.</p>
<hr>
<h2 id=5-elasticsearch>5. ElasticSearch<a href=#5-elasticsearch class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>Este também foi fácil, a própria <a href=https://www.elastic.co/guide/en/elastic-stack-get-started/current/get-started-docker.html>documentação oficial</a> disponibiliza um <code>compose</code> praticamente pronto, eu apenas reduzi um node, acredito que dois já são suficientes para desenvolvimento local, o link está <a href=https://github.com/leocarmo/docker-local-stack/blob/main/elasticsearch/docker-compose-cluster.yaml>aqui</a>. Para rodar:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>docker compose -f elasticsearch/docker-compose-cluster.yaml up -d
</code></pre></div><p>O ElasticSearch ficará disponível em <a href=http://0.0.0.0:9200/>http://0.0.0.0:9200/</a> e o Kibana em <a href=http://0.0.0.0:5601/>http://0.0.0.0:5601/</a>.</p>
<p>O destaque aqui vai para o <a href=https://github.com/lmenezes/cerebro>Cerebro</a>, uma UI que ajuda bastante na hora de entender como está a distribuição dos shards, consumo de recurso, entre outras informações importantes do cluster.</p>
<p><img src=https://cdn.hashnode.com/res/hashnode/image/upload/v1626479198955/m7NkaWdQr.png alt=Cerebro></p>
<p>O <code>compose</code> do Cerebro está <a href=https://github.com/leocarmo/docker-local-stack/blob/main/elasticsearch/docker-compose-cerebro.yaml>aqui</a> e ficará disponível em <a href=http://0.0.0.0:9000/>http://0.0.0.0:9000/</a>. Para rodar:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>docker compose -f elasticsearch/docker-compose-cerebro.yaml up -d
</code></pre></div><p>Para começar usar é simples, basta colocar o endereço do ElasticSearch, no nosso caso o nome do container e a porta: <code>http://es01:9200</code>.</p>
<hr>
<h2 id=6-databases>6. Databases<a href=#6-databases class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>Nesta seção, deixei os principais bancos preparados: <a href=https://hub.docker.com/_/mariadb>MariaDB</a>, <a href=https://hub.docker.com/_/mysql>MySQL</a> e o <a href=https://hub.docker.com/_/postgres>Postgres</a> com <a href=https://www.pgadmin.org/>pgAdmin4</a>.</p>
<p>Também são bem simples, o <code>compose</code> do MariaDB está <a href=https://github.com/leocarmo/docker-local-stack/blob/main/databases/docker-compose-mariadb.yaml>aqui</a>, do MySQL <a href=https://github.com/leocarmo/docker-local-stack/blob/main/databases/docker-compose-mysql.yaml>aqui</a> e do Postgres <a href=https://github.com/leocarmo/docker-local-stack/blob/main/databases/docker-compose-postgres.yaml>aqui</a>. Para rodar cada um:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>docker compose -f databases/docker-compose-mariadb.yaml up -d
docker compose -f databases/docker-compose-mysql.yaml up -d
docker compose -f databases/docker-compose-postgres.yaml up -d
</code></pre></div><p>Ao subir os containers, os volumes serão criados em <code>databases/var</code>, no mesmo diretório dos arquivos do <code>compose</code>.</p>
<p>Para gerenciar o Postgres, o pgAdmin estará disponível em <a href=http://0.0.0.0:5050/>http://0.0.0.0:5050/</a>:</p>
<p><img src=https://cdn.hashnode.com/res/hashnode/image/upload/v1626483179054/OYLK7Q5QT.png alt=pgAdmin></p>
<p>Para gerenciar o MariaDB e MySQL, sugiro utilizar o <a href=https://dev.mysql.com/downloads/workbench/>MySQL Workbench</a>, que infelizmente não tem sua versão em container&mldr; Mas vale a pena, ele é muito completo e vai te ajudar bastante.</p>
<p><img src=https://cdn.hashnode.com/res/hashnode/image/upload/v1626483359586/3AK3FMQhK.png alt="MySQL Workbench"></p>
<hr>
<h2 id=7-mock>7. Mock<a href=#7-mock class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>Sempre que estamos desenvolvendo microsserviços, em algum momento vamos nos deparar com alguma dependência externa, e isso pode ser uma grande dor de cabeça.</p>
<p>Para ajudar nessa questão, gosto muito de utilizar um <a href=https://www.mock-server.com/#what-is-mockserver>serviço de mock</a> para desenvolvimento. Além de ajudar muito da hora de codar, pode ser muito útil também para realização de testes, por exemplo. <a href=https://www.mock-server.com/#why-use-mockserver>Aqui</a> tem mais alguns benefícios de se utilizar.</p>
<p>Venho utilizando o <a href=https://www.mock-server.com/>MockServer</a>, ele é bem customizável, possui inúmeras funcionalidades, é bem fácil de configurar, possui uma <a href=https://www.mock-server.com/mock_server/mockserver_ui.html>UI</a> para debug bem bacana e a documentação é bem completa.</p>
<p><img src=https://cdn.hashnode.com/res/hashnode/image/upload/v1626709516128/cHznYZYh-.png alt=MockServer></p>
<p>O <code>compose</code> dele está <a href=https://github.com/leocarmo/docker-local-stack/blob/main/mock/docker-compose.yaml>aqui</a>, e dentro da mesma pasta existe um arquivo de configurações, caso você queira mudar essas configurações, basta seguir <a href=https://www.mock-server.com/mock_server/getting_started.html>esta documentação</a>. Para rodar:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>docker compose -f mock/docker-compose.yaml up -d
</code></pre></div><p>Após subir os containers, a UI estará disponível em: <a href=http://0.0.0.0:1080/mockserver/dashboard>http://0.0.0.0:1080/mockserver/dashboard</a>, e caso você não tenha alterado o arquivo de configurações, a rota de testes será:
<a href=http://0.0.0.0:1080/hello>http://0.0.0.0:1080/hello</a></p>
<hr>
<h2 id=8-aws>8. AWS<a href=#8-aws class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>Com certeza não poderia faltar o <a href=https://github.com/localstack/localstack>AWS LocalStack</a>. Então se você não conhece esse projeto e usa AWS, recomendo dar uma olhada.</p>
<p>Apesar de muito útil, pode dar algum trabalho configurar alguns recursos nele, mas após configurado corretamente, pode salvar muito tempo tentando resolver algo direto pela AWS, além de economizar na conta rsrs.</p>
<p>A ideia aqui é deixar um <a href=https://aws.amazon.com/pt/sqs/>SQS</a> configurado e rodando. Para configurar outros recursos basta dar uma olhada na <a href=https://localstack.cloud/docs/>documentação oficial</a>.</p>
<p>O <code>compose</code> do SQS está <a href=https://github.com/leocarmo/docker-local-stack/blob/main/databases/docker-compose-postgres.yaml>aqui</a>. Para iniciar:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>docker compose -f aws/docker-compose-sqs.yaml up
</code></pre></div><p>Se tudo der certo, você verá a seguinte mensagem no console de que o mock do SQS subiu com sucesso na porta 4566:</p>
<p><img src=https://cdn.hashnode.com/res/hashnode/image/upload/v1626712220281/JAlS_k_VV.png alt="SQS LocalStack"></p>
<blockquote>
<p>Repare na segunda linha a mensagem: Starting mock SQS service on http port 4566 &mldr;</p>
</blockquote>
<p>O LocalStack também sobre uma rota de heath check, que fica disponível em <a href=https://0.0.0.0:4566/health>https://0.0.0.0:4566/health</a>, lá você deveria ver o seguinte json:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
    <span style=color:#f92672>&#34;services&#34;</span>: {
        <span style=color:#f92672>&#34;sqs&#34;</span>: <span style=color:#e6db74>&#34;running&#34;</span>
    },
    <span style=color:#f92672>&#34;features&#34;</span>: {
        <span style=color:#f92672>&#34;persistence&#34;</span>: <span style=color:#e6db74>&#34;disabled&#34;</span>,
        <span style=color:#f92672>&#34;initScripts&#34;</span>: <span style=color:#e6db74>&#34;initialized&#34;</span>
    }
}
</code></pre></div><p>Ótimo, com tudo isso funcionando, utilizaremos esse serviço. Primeiro, precisamos criar uma fila, pois só subimos o serviço. Para isso, utilizamos o <a href=https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html>aws-cli</a>.</p>
<p>Criando uma fila no SQS:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>aws --endpoint-url<span style=color:#f92672>=</span>http://0.0.0.0:4566 sqs create-queue --queue-name my-queue
</code></pre></div><p>Para verificar se a fila foi criada com sucesso utilize o comando:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>aws --endpoint-url<span style=color:#f92672>=</span>http://0.0.0.0:4566 sqs list-queues
</code></pre></div><p>Agora enviaremos uma mensagem para a fila que criamos:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>aws --endpoint-url<span style=color:#f92672>=</span>http://0.0.0.0:4566 sqs send-message --queue-url http://0.0.0.0:4566/000000000000/my-queue --message-body <span style=color:#e6db74>&#39;Hello SQS World&#39;</span>
</code></pre></div><p>Para ler a mensagem que acabamos de criar:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>aws --endpoint-url<span style=color:#f92672>=</span>http://0.0.0.0:4566 sqs receive-message --queue-url http://0.0.0.0:4566/000000000000/my-queue
</code></pre></div><p>Para acessar a lista completa de comandos do SQS via aws-cli acesse a <a href=https://awscli.amazonaws.com/v2/documentation/api/latest/reference/sqs/index.html#cli-aws-sqs>documentação oficial</a>.</p>
<hr>
<blockquote>
<p>Dica: caso voce já tenha uma network criada para suas aplicações, basta <a href=https://docs.docker.com/engine/reference/commandline/network_connect/>conectar</a> os containers criados aqui com a sua network usando este comando:</p>
</blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>docker network connect my-network redis-single
</code></pre></div><blockquote>
<p>Importante: para as stacks em cluster, é preciso conectar cada container na sua network.</p>
</blockquote>
<hr>
<p>Basicamente com essa stack muitos dos problemas do dia a dia podem ser resolvidos. Espero que te ajude de alguma forma no seu fluxo de desenvolvimento local.</p>
<p>Alguma sugestão de alguma ferramenta que faltou aqui? Deixa nos comentários!</p>
</div></div>
<div class=pagination>
<div class=pagination__title>
<span class=pagination__title-h>Read other posts</span>
<hr>
</div>
<div class=pagination__buttons>
<span class="button next">
<a href=/hyperf-php-coroutine-framework-baseado-em-swoole/>
<span class=button__text>Hyperf - PHP Coroutine Framework baseado em Swoole</span>
<span class=button__icon>→</span>
</a>
</span>
</div>
</div>
</div>
</div>
<footer class=footer>
<div class=footer__inner>
<div class="copyright copyright--user">
<span>leocarmo.dev</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span>
</div>
</div>
</footer>
<script src=/assets/main.js></script>
<script src=/assets/prism.js></script>
<script>window.onload=function(){let a=document.getElementsByTagName('a'),b=window.location.hostname;for(let c=0;c<a.length;c++){if(a[c].href.includes(b))continue;a[c].setAttribute('target','_blank')}}</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WG95JRMMET"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-WG95JRMMET')</script>
</div>
</body>
</html>